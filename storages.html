<!DOCTYPE html>
<html lang="pl-PL">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title> My Site in HTML5 </title>

		<link rel="stylesheet" href="style.css" type="text/css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	</head>

	<body>
		<header id="page_header">
			<h1> Local/Session Storages </h1>

			<nav>
				<ul>
					<li><a href="/">Aktualności</a></li>
					<li><a href="forms.html">Formularz </a></li>
					<li><a href="login.html">Logowanie </a></li>
					<li><a href="newsletter.html">Newsletter </a></li>
					<li><a href="canvas.html">Canvas</a></li>
					<li><a href="gradients.html">Gradienty</a></li>
					<li><a href="storages.html">Local/Session Storages</a></li>
					<li><a href="tables.html">Tabela </a></li>
					<li><a href="photos">Zdjęcia </a></li>
					<li><a href="graphs">Grafika </a></li>
					<li><a href="movies">Filmy </a></li>
					<li><a href="contact">Kontakt </a></li>
				</ul>
			</nav>
		</header>

		<section id="storages">
	
			<p><strong>Preferencje uzytkownika </strong><p>
			<form id="preferences" action="save_prefs" method="post" accept-charset="utf-8">
				<fieldset id="colors" class="">
					<legend>Kolory</legend>
					<ol>
						<li>
							<label for="background_color">Kolor tła </label>
							<input type="color" name=="background_color" value="" id="background_color">
						</li>
						<li>
							<label for="text_color">Kolor czcionki </label>
							<input type="color" name=="text_color" value="" id="text_color">
						</li>
						<li>
							<label for="text_size">Rozmiar tekstu </label>
							<select name="text_size" id="text_size">
								<option value="16">16px</option>
								<option value="20">20px</option>
								<option value="24">24px</option>
								<option value="32">32px</option>
							</select>	
						</li>
					</ol>
					<input type="submit" value="Zapisz zmiany">
				</fieldset>
			

			</form>	
		
		</section>
		<script>
			function save_settings(){
				localStorage.setItem("background_color", $("#background_color").val());
				localStorage.setItem("text_color", $("#text_color").val());
				localStorage.setItem("text_size", $("#text_size").val());
				apply_preferences_to_page();
			}

			function load_settings(){
				var bg_color = localStorage.getItem("background_color");
				var text_color = localStorage.getItem("text_color");
				var text_size = localStorage.getItem("text_size");

				$("#background_color").val(bg_color);
				$("#text_color").val(text_color);
				$("#text_size").val(text_size);
				apply_preferences_to_page();
			}
			
			function apply_preferences_to_page(){
				$("body").css("backgroundColor", $("#background_color").val());
				$("body").css("color", $("#text_color").val());
				$("body").css("fontSize", $("#text_size").val() + "px");
			}
			
			$(function(){
				
				load_settings();

				$('form#preferences').submit(function(event){
					event.preventDefault();
					save_settings();
				});
			});
				
		</script>	
		<footer id="page_footer">
			<p>&copy; 2015 TB </p>
			<nav>
				<ul>
					<li><a href="/">Strona glówna</a></li>
					<li><a href="about">O nas </a></li>
					<li><a href="terms">Warunki</a></li>
					<li><a href="privacy">Poufność</a></li>
				</ul>
			</nav
		</footer>
	</body>
</html>
